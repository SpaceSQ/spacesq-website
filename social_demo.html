<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>SpaceSQ // Social Bubble Simulator</title>
    <style>
        body { background: #111; color: #eee; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; }
        #canvas-container { position: relative; width: 600px; height: 600px; margin-top: 20px; background: #222; border: 2px solid #444; display: grid; grid-template-columns: repeat(8, 1fr); grid-template-rows: repeat(8, 1fr); }
        .grid-cell { border: 1px solid #333; }
        
        /* ç©ºé—´äººæ°”æ³¡ */
        .bubble {
            position: absolute; width: 150px; height: 150px; 
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 12px; cursor: grab; transition: background 0.2s;
            mix-blend-mode: screen; /* å…‰æ•ˆæ··åˆ */
        }
        #p1 { background: rgba(255, 100, 100, 0.4); border: 2px solid red; top: 50px; left: 50px; }
        #p2 { background: rgba(100, 100, 255, 0.4); border: 2px solid blue; top: 400px; left: 400px; }
        
        .info-panel { margin-top: 20px; width: 600px; display: flex; justify-content: space-between; }
        .log-box { width: 100%; height: 100px; background: black; border: 1px solid #555; padding: 10px; font-family: monospace; font-size: 12px; overflow-y: auto; margin-top: 10px; color: #0f0;}
    </style>
</head>
<body>
    <h1>SpaceSQ ç¤¾äº¤åœºåŸŸèåˆæ¨¡æ‹Ÿ</h1>
    <p>æ‹–åŠ¨åœ†åœˆ (ç©ºé—´äºº) æ¥æ¨¡æ‹Ÿå¤§ç©ºé—´å†…çš„ä¸ªæ€§åŒ–å¾®æ°”å€™</p>

    <div id="canvas-container">
        </div>
    
    <div id="p1" class="bubble" onmousedown="startDrag(event, this)">
        David<br>Temp: 26Â°C<br>Music: Pop
    </div>
    <div id="p2" class="bubble" onmousedown="startDrag(event, this)">
        Robot<br>Temp: 18Â°C<br>Mode: Silent
    </div>

    <div class="log-box" id="console">System Ready.</div>

    <script>
        const container = document.getElementById('canvas-container');
        
        // ç”Ÿæˆç½‘æ ¼èƒŒæ™¯
        for(let i=0; i<64; i++) {
            let div = document.createElement('div');
            div.className = 'grid-cell';
            container.appendChild(div);
        }

        // ç®€å•çš„æ‹–æ‹½é€»è¾‘
        let selected = null;
        let offsetX = 0, offsetY = 0;

        function startDrag(e, el) {
            selected = el;
            offsetX = e.clientX - el.offsetLeft;
            offsetY = e.clientY - el.offsetTop;
            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', endDrag);
        }

        function drag(e) {
            if (!selected) return;
            let x = e.clientX - offsetX;
            let y = e.clientY - offsetY;
            
            // é™åˆ¶è¾¹ç•Œ
            x = Math.max(0, Math.min(x, 450));
            y = Math.max(0, Math.min(y, 450));
            
            selected.style.left = x + 'px';
            selected.style.top = y + 'px';
            
            checkInteraction();
        }

        function endDrag() {
            selected = null;
            document.removeEventListener('mousemove', drag);
            document.removeEventListener('mouseup', endDrag);
        }

        // æ ¸å¿ƒï¼šæ£€æµ‹äº’åŠ¨
        function checkInteraction() {
            const p1 = document.getElementById('p1');
            const p2 = document.getElementById('p2');
            const log = document.getElementById('console');

            const x1 = p1.offsetLeft + 75;
            const y1 = p1.offsetTop + 75;
            const x2 = p2.offsetLeft + 75;
            const y2 = p2.offsetTop + 75;

            // è®¡ç®—è·ç¦»
            const dist = Math.sqrt(Math.pow(x2-x1, 2) + Math.pow(y2-y1, 2));

            let status = "";

            if (dist < 150) {
                // é‡å  (Intimate/Conflict Zone)
                status = `âš ï¸ [å†²çª] è·ç¦» ${(dist/100).toFixed(1)}m. ç‰©ç†åœºåŸŸé‡å ! <br>> å¯åŠ¨å¾®æ°”å€™éš”ç¦»ã€‚<br>> æ¸©åº¦èåˆ: 22Â°C (æ¢¯åº¦è¿‡æ¸¡)`;
                p1.style.background = "rgba(255, 0, 255, 0.6)"; // ç´«è‰²èåˆ
                p2.style.background = "rgba(255, 0, 255, 0.6)";
            } else if (dist < 300) {
                // ä¸´è¿‘ (Social Zone)
                status = `ğŸ¤ [ç¤¾äº¤] è·ç¦» ${(dist/100).toFixed(1)}m. è¯†åˆ«ä¸ºç¤¾äº¤æ¨¡å¼ã€‚<br>> èƒŒæ™¯éŸ³ä¹éŸ³é‡é™ä½ã€‚<br>> ç¯å…‰è°ƒæ•´ä¸ºæ°›å›´æ¨¡å¼ã€‚`;
                p1.style.background = "rgba(255, 100, 100, 0.4)";
                p2.style.background = "rgba(100, 100, 255, 0.4)";
            } else {
                // ç‹¬ç«‹ (Private Zone)
                status = `âœ… [ç‹¬ç«‹] å„è‡ªè¿è¡Œä¸ªæ€§åŒ–ç¯å¢ƒã€‚`;
                p1.style.background = "rgba(255, 100, 100, 0.4)";
                p2.style.background = "rgba(100, 100, 255, 0.4)";
            }

            log.innerHTML = `[Distance Check] ${status}`;
        }
    </script>
</body>
</html>
